# 账本存储与区块读写

流程：
1. 发起Transaction Invoke（client->peer) 
2. 执行链码提供背书 (peer->client) 
3. 将已背书Transaction发送排序节点 (client->orderer) 
4. 形成区块，发送各节点commit，写入账本 (orderer->peer)


## 1. 发起Transaction Invoke
对应命令入口
```bash
peer chaincode invoke ...
```

1. 程序入口的main函数(`src/github.com/hyperledger/fabric/peer/main.go:52`)
1. 调用chaincode.Cmd (`src/github.com/hyperledger/fabric/peer/chaincode/chaincode.go:49`)，
1. 进一步调用invokeCmd (`src/github.com/hyperledger/fabric/peer/chaincode/invoke.go:19`),
1. 配置参数，配置执行函数 chaincodeInvoke (`src/github.com/hyperledger/fabric/peer/chaincode/invoke.go:44`)
1. 在chaincodeInvoke函数中，返回函数chaincodeInvokeOrQuery（`src/github.com/hyperledger/fabric/peer/chaincode/common.go:92`)
1. 在chaincodeInvokeOrQuery函数中，调用函数ChaincodeInvokeOrQuery执行交易发起逻辑 (`src/github.com/hyperledger/fabric/peer/chaincode/common.go:424`)  
1. 在ChaincodeInvokeOrQuery中执行交易，(``)
1. (``)
1. (``)
1. (``)
1. (``)
1. (``)
1. (``)
1. (``)
1. (``)
1. (``)


## 2. 服务端处理过程
对应命令入口 
```bash
peer 
```